<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate change mitigation should prioritize adaptation over prevention - Graph View</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* Inline critical styles (graph.css will be external for customization) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8eef5 100%);
            overflow: hidden;
        }

        #header {
            background: white;
            border-bottom: 1px solid #a2a9b1;
            padding: 15px 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 70px;
        }

        #header h1 {
            font-size: 1.3em;
            font-weight: 400;
            color: #202122;
            margin-bottom: 5px;
        }

        #header .meta {
            font-size: 0.85em;
            color: #72777d;
        }

        #controls {
            position: fixed;
            top: 80px;
            left: 10px;
            background: white;
            border: 1px solid #a2a9b1;
            border-radius: 4px;
            padding: 15px;
            z-index: 100;
            max-width: 250px;
        }

        #controls h3 {
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #202122;
        }

        #controls input[type="text"] {
            width: 100%;
            padding: 6px 10px;
            border: 1px solid #a2a9b1;
            border-radius: 3px;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        #controls button {
            width: 100%;
            padding: 6px 10px;
            margin-bottom: 5px;
            border: 1px solid #a2a9b1;
            background: white;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.85em;
        }

        #controls button:hover {
            background: #eaecf0;
        }

        #legend {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eaecf0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 5px;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #eaecf0;
            border-left-width: 3px;
            border-left-color: #0645ad;
        }

        .stat-label {
            display: block;
            font-size: 0.7em;
            color: #72777d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 3px;
        }

        .stat-number {
            display: block;
            font-size: 1.3em;
            font-weight: 600;
            color: #202122;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.85em;
        }

        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            margin-right: 10px;
            flex-shrink: 0;
        }

        #sidebar {
            position: fixed;
            top: 70px;
            right: -550px;
            width: 520px;
            height: calc(100vh - 70px);
            background: white;
            border-left: 2px solid #a2a9b1;
            transition: right 0.3s ease;
            z-index: 100;
            overflow-y: auto;
            padding: 0;
            box-shadow: -4px 0 12px rgba(0, 0, 0, 0.1);
        }

        #sidebar.open {
            right: 0;
        }

        #sidebar .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #f8f9fa;
            border: 1px solid #a2a9b1;
            border-radius: 4px;
            width: 32px;
            height: 32px;
            font-size: 1.3em;
            cursor: pointer;
            color: #72777d;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            z-index: 10;
        }

        #sidebar .close-btn:hover {
            background: #eaecf0;
            color: #202122;
        }

        #sidebar-header {
            background: #f8f9fa;
            border-bottom: 1px solid #eaecf0;
            padding: 20px 25px;
            padding-right: 55px;
        }

        #sidebar-header h2 {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 8px;
            color: #202122;
        }

        .breadcrumb {
            font-size: 0.8em;
            color: #72777d;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
        }

        .breadcrumb-item {
            cursor: pointer;
            transition: color 0.2s;
        }

        .breadcrumb-item:hover {
            color: #0645ad;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a2a9b1;
            margin: 0 3px;
        }

        #sidebar-body {
            padding: 20px 25px;
        }

        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 0.9em;
            font-weight: 600;
            color: #72777d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .node-text {
            font-size: 0.95em;
            line-height: 1.7;
            color: #202122;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #0645ad;
        }

        .node-badge-large {
            display: inline-block;
            font-size: 0.75em;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-right: 8px;
        }

        .node-badge-large.pro {
            background: #d5f0e8;
            color: #2d9e7e;
            border: 1px solid #2d9e7e;
        }

        .node-badge-large.con {
            background: #f7e0e0;
            color: #c74848;
            border: 1px solid #c74848;
        }

        .node-badge-large.objection {
            background: #ffecd9;
            color: #d97a30;
            border: 1px solid #d97a30;
        }

        .node-badge-large.response {
            background: #e3eef8;
            color: #4a7fb8;
            border: 1px solid #4a7fb8;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 10px;
        }

        .meta-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #eaecf0;
        }

        .meta-label {
            font-size: 0.75em;
            color: #72777d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .meta-value {
            font-size: 1em;
            font-weight: 600;
            color: #202122;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #a2a9b1;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .action-btn:hover {
            background: #f8f9fa;
            border-color: #0645ad;
            color: #0645ad;
        }

        .action-btn.primary {
            background: #0645ad;
            color: white;
            border-color: #0645ad;
        }

        .action-btn.primary:hover {
            background: #0051a0;
        }

        .child-node {
            background: white;
            border: 1px solid #eaecf0;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 4px solid transparent;
        }

        .child-node:hover {
            border-color: #0645ad;
            border-left-color: #0645ad;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .child-node.pro {
            border-left-color: #2d9e7e;
        }

        .child-node.con {
            border-left-color: #c74848;
        }

        .child-node.objection {
            border-left-color: #d97a30;
        }

        .child-node.response {
            border-left-color: #4a7fb8;
        }

        .child-node-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .child-node-badge {
            font-size: 0.7em;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .child-node-text {
            font-size: 0.9em;
            line-height: 1.5;
            color: #202122;
        }

        .references-list {
            list-style: none;
            padding: 0;
        }

        .references-list li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .references-list li:before {
            content: "üîó";
            position: absolute;
            left: 0;
        }

        .references-list a {
            color: #0645ad;
            text-decoration: none;
            font-size: 0.85em;
            word-break: break-all;
        }

        .references-list a:hover {
            text-decoration: underline;
        }

        .empty-state {
            text-align: center;
            padding: 30px 20px;
            color: #72777d;
            font-size: 0.9em;
        }

        .stats-row {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .stat-box {
            text-align: center;
        }

        .stat-box-value {
            font-size: 1.4em;
            font-weight: 600;
            color: #0645ad;
        }

        .stat-box-label {
            font-size: 0.75em;
            color: #72777d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 2px;
        }

        #graph-container {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            bottom: 0;
        }

        svg {
            width: 100%;
            height: 100%;
        }

        .node {
            cursor: pointer;
        }

        .node circle {
            stroke: none;
            fill: transparent;
            opacity: 0;
            /* Keep circles for physics/collision detection but hide them */
        }

        /* Highlighted and selected states now apply to text boxes */
        .node.highlighted .node-text-content {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        .node.selected .node-text-content {
            outline: 3px solid #0645ad;
            outline-offset: 2px;
        }

        /* foreignObject for text wrapping */
        .node foreignObject {
            overflow: visible;
            pointer-events: auto;  /* Make text boxes clickable */
        }

        .node-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            pointer-events: auto;  /* Make labels clickable */
        }

        .node-badge {
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 3px;
            margin-bottom: 3px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .node-badge.pro {
            color: #2d9e7e;
            border-color: #2d9e7e;
        }

        .node-badge.con {
            color: #c74848;
            border-color: #c74848;
        }

        .node-badge.objection {
            color: #d97a30;
            border-color: #d97a30;
        }

        .node-badge.response {
            color: #4a7fb8;
            border-color: #4a7fb8;
        }

        .node-text-content {
            color: #202122;
            line-height: 1.4;
            word-wrap: break-word;
            background: rgba(255, 255, 255, 0.95);
            padding: 6px 10px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-left-width: 3px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        /* Color-coded left borders by node type */
        .node.pro .node-text-content {
            border-left-color: #2d9e7e;
            background: rgba(213, 240, 232, 0.85);
        }

        .node.con .node-text-content {
            border-left-color: #c74848;
            background: rgba(247, 224, 224, 0.85);
        }

        .node.objection .node-text-content {
            border-left-color: #d97a30;
            background: rgba(255, 236, 217, 0.85);
        }

        .node.response .node-text-content {
            border-left-color: #4a7fb8;
            background: rgba(227, 238, 248, 0.85);
        }

        /* Depth-based opacity for hierarchy */
        .node.depth-0 .node-text-content {
            opacity: 1;
        }

        .node.depth-1 .node-text-content {
            opacity: 0.95;
        }

        .node.depth-2 .node-text-content {
            opacity: 0.9;
        }

        .node.depth-3 .node-text-content {
            opacity: 0.85;
        }

        .node.depth-4 .node-text-content {
            opacity: 0.8;
        }

        .node.depth-5 .node-text-content {
            opacity: 0.75;
        }

        /* Meta node text gets special styling */
        .node.meta-pro .node-text-content,
        .node.meta-con .node-text-content {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 16px;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border-left-width: 5px;
        }

        .node.meta-pro .node-text-content {
            background: rgba(213, 240, 232, 0.95);
            border-left-color: #2d9e7e;
        }

        .node.meta-con .node-text-content {
            background: rgba(247, 224, 224, 0.95);
            border-left-color: #c74848;
        }

        /* Subtle hover effects */
        .node:hover .node-text-content {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .link:hover {
            stroke-opacity: 0.8 !important;
            stroke-width: 3px;
        }

        .node title {
            font-size: 14px;
        }

        .link {
            stroke: #8b95a5;
            stroke-opacity: 0.3;
            fill: none;
            transition: all 0.2s ease;
        }

        /* Unified link styling - all types use same neutral color for cleaner look */
        .link.pro,
        .link.con,
        .link.objection,
        .link.response {
            stroke: #8b95a5;
            stroke-opacity: 0.3;
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>Climate change mitigation should prioritize adaptation over prevention</h1>
        <div class="meta">
            5 arguments for ‚Ä¢ 5 arguments against ‚Ä¢
            43 total nodes ‚Ä¢ Max depth: 3 ‚Ä¢
            Version 5
        </div>
    </div>

    <div id="controls">
        <a href="../debates/climate-change-mitigation-should-prioritize-adaptation-over-prevention.html" style="display: block; width: 100%; padding: 8px 10px; margin-bottom: 10px; text-align: center; background: #0645ad; color: white; border-radius: 3px; text-decoration: none; font-size: 0.85em; font-weight: 500;">üìñ View Debate Page</a>

        <h3>üîç Search & Navigate</h3>
        <input type="text" id="search" placeholder="Search arguments...">
        <button onclick="resetAndFit()">üéØ Reset & Fit View</button>

        <div id="legend">
            <h3>üìä Tree Statistics</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">Total Nodes</span>
                    <span class="stat-number">43</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Max Depth</span>
                    <span class="stat-number">3</span>
                </div>
                <div class="stat-item" style="border-left: 3px solid #2d9e7e;">
                    <span class="stat-label">Supporting</span>
                    <span class="stat-number" style="color: #2d9e7e;">5</span>
                </div>
                <div class="stat-item" style="border-left: 3px solid #c74848;">
                    <span class="stat-label">Opposing</span>
                    <span class="stat-number" style="color: #c74848;">5</span>
                </div>
            </div>

            <h3 style="margin-top: 15px;">üé® Argument Types</h3>
            <div class="legend-item">
                <div class="legend-color" style="background: rgba(213, 240, 232, 0.85); border: 2px solid #2d9e7e;"></div>
                <span>Pro / Supporting</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: rgba(247, 224, 224, 0.85); border: 2px solid #c74848;"></div>
                <span>Con / Opposing</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: rgba(255, 236, 217, 0.85); border: 2px solid #d97a30;"></div>
                <span>Objection</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: rgba(227, 238, 248, 0.85); border: 2px solid #4a7fb8;"></div>
                <span>Response</span>
            </div>
        </div>
    </div>

    <div id="sidebar">
        <button class="close-btn" onclick="closeSidebar()">√ó</button>
        <div id="sidebar-header"></div>
        <div id="sidebar-body"></div>
    </div>

    <div id="graph-container">
        <svg id="graph"></svg>
    </div>

    <script>
        // Graph data from Python
        const graphData = {
  "nodes": [
    {
      "id": "9bf3d0ae-e7ef-4ed3-b57f-e1142c9519d6",
      "text": "Significant climate impacts are locked in for decades due to the inertia of the climate system, making adaptation a necessary investment regardless of prevention success. For instance, countries like the Netherlands must prioritize major flood defense systems and coastal protection measures now to protect low-lying regions.",
      "type": "pro",
      "side": "pro",
      "depth": 0,
      "parent_id": "meta-pro",
      "children_count": 2,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:15.097387"
    },
    {
      "id": "372ac475-be51-4a7e-87f0-260058e5eeed",
      "text": "Adaptation yields localized, immediate, and measurable returns, offering a superior cost-utility ratio in the short term, especially in vulnerable regions. Implementing decentralized adaptive strategies, such as developing drought-resistant seed variants for Sub-Saharan Africa, provides tangible benefits faster than waiting for global emission reductions.",
      "type": "pro",
      "side": "pro",
      "depth": 0,
      "parent_id": "meta-pro",
      "children_count": 2,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:15.097929"
    },
    {
      "id": "9a93740a-97f0-4c7a-ab6f-3fb948fd593b",
      "text": "Prioritizing adaptation addresses climate justice by immediately funding resilience for vulnerable developing nations and Small Island Developing States (SIDS), which contributed least to global emissions. This approach permits necessary economic growth in these regions without the massive up-front capital requirements of prevention infrastructure.",
      "type": "pro",
      "side": "pro",
      "depth": 0,
      "parent_id": "meta-pro",
      "children_count": 2,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:15.098227"
    },
    {
      "id": "4f09eaee-3435-4d9f-9abf-5fae495951c8",
      "text": "Adaptation typically involves politically palatable investments in localized infrastructure (e.g., water management, disaster preparedness) that gain quicker public support than economy-restructuring prevention measures. Local investment in hardening public electrical grids against extreme heat or storms, for example, generates far less political resistance than national implementation of high carbon taxes.",
      "type": "pro",
      "side": "pro",
      "depth": 0,
      "parent_id": "meta-pro",
      "children_count": 2,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:15.098486"
    },
    {
      "id": "a5f39e8e-a0c7-49c9-b542-673908cf6d76",
      "text": "Adaptation is conditional on mitigation; failure to limit warming above 2\u00b0C ensures that strategies like continuous coastal defense for 4\u00b0C sea level rise are financially unsustainable and technically impossible to maintain.",
      "type": "objection",
      "side": "con",
      "depth": 1,
      "parent_id": "9bf3d0ae-e7ef-4ed3-b57f-e1142c9519d6",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:24.430290"
    },
    {
      "id": "a4f6f316-1f1a-49fd-a979-51db2c3053e2",
      "text": "Adaptation costs are often recurrent and escalate as climate impacts worsen (e.g., needing higher sea walls), making their cumulative long-term cost-utility inferior to highly effective, non-recurrent mitigation investments that permanently avoid future damages.",
      "type": "objection",
      "side": "con",
      "depth": 1,
      "parent_id": "372ac475-be51-4a7e-87f0-260058e5eeed",
      "children_count": 2,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:26.214987"
    },
    {
      "id": "88ada93f-5b44-4400-b9e2-3996199525ea",
      "text": "Mitigation strategies like accelerated coal phase-outs yield immediate, measurable benefits by saving millions of lives annually from reduced air pollution, a rapid return that often exceeds the scope of localized adaptation projects.",
      "type": "objection",
      "side": "con",
      "depth": 1,
      "parent_id": "372ac475-be51-4a7e-87f0-260058e5eeed",
      "children_count": 1,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:26.215445"
    },
    {
      "id": "07b5f2d6-c1d9-4f15-a1d3-4720fe1c44b3",
      "text": "Advanced adaptation efforts, such as mandatory managed coastal retreat or mass resettlement due to water scarcity, are politically contentious and economically disruptive, often facing far more resistance than localized infrastructure upgrades.",
      "type": "objection",
      "side": "con",
      "depth": 1,
      "parent_id": "4f09eaee-3435-4d9f-9abf-5fae495951c8",
      "children_count": 1,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:26.256816"
    },
    {
      "id": "97d81df7-c782-4a97-a275-a30785e9ac14",
      "text": "The comparison is flawed because many prevention policies, such as vehicle efficiency standards or public investment in reliable mass transit, are politically popular and do not face the resistance associated with high carbon taxes.",
      "type": "objection",
      "side": "con",
      "depth": 1,
      "parent_id": "4f09eaee-3435-4d9f-9abf-5fae495951c8",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:26.257251"
    },
    {
      "id": "afc0f818-0764-482e-9b7c-6f68a5799e5f",
      "text": "Large-scale adaptation projects like permanent infrastructure and managed retreat require massive upfront capital; UNEP estimates annual adaptation costs for developing nations could reach $340 billion by 2030, contradicting the low-cost premise.",
      "type": "objection",
      "side": "con",
      "depth": 1,
      "parent_id": "9a93740a-97f0-4c7a-ab6f-3fb948fd593b",
      "children_count": 1,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:27.274187"
    },
    {
      "id": "4d41ab29-df7d-4f72-b950-e42cec16a9b4",
      "text": "Prioritizing adaptation while neglecting global mitigation fails climate justice because unchecked emissions guarantee future warming will eventually exceed adaptive limits, permanently destroying vulnerable regions like SIDS regardless of immediate funding.",
      "type": "objection",
      "side": "con",
      "depth": 1,
      "parent_id": "9a93740a-97f0-4c7a-ab6f-3fb948fd593b",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:27.274635"
    },
    {
      "id": "780f652c-69ff-418e-898b-c30f320190c9",
      "text": "These examples represent massive, last-resort measures; they overlook common, less disruptive adaptation strategies like upgrading municipal drainage systems, offering subsidies for water-efficient appliances, and using climate-resilient construction standards, which are often readily accepted and politically palatable.",
      "type": "response",
      "side": "pro",
      "depth": 2,
      "parent_id": "07b5f2d6-c1d9-4f15-a1d3-4720fe1c44b3",
      "children_count": 2,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:35.505515"
    },
    {
      "id": "108f3cbc-6336-4e71-bda3-51b40f8ae328",
      "text": "Key climate mitigation efforts beyond air pollution control, such as widespread carbon capture and storage (CCS) or developing sustainable aviation fuel, involve high initial costs and long development timelines that do not yield significant immediate public health or economic co-benefits.",
      "type": "response",
      "side": "pro",
      "depth": 2,
      "parent_id": "88ada93f-5b44-4400-b9e2-3996199525ea",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:35.596157"
    },
    {
      "id": "0c88636e-45a0-42ba-a9df-b2bad79d9fff",
      "text": "Mitigation infrastructure requires significant recurrent costs for maintenance, operations, and upgrades, meaning investments in renewable energy or carbon capture do not permanently eliminate future financial commitments.",
      "type": "response",
      "side": "pro",
      "depth": 2,
      "parent_id": "a4f6f316-1f1a-49fd-a979-51db2c3053e2",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:38.732926"
    },
    {
      "id": "aa400806-73d3-485d-96fb-61a63382e8c6",
      "text": "Adaptation addresses non-substitutable, immediate needs resulting from unavoidable committed warming, meaning its cost-utility cannot be universally deemed inferior, as its benefits include preserving essential societal functionality and immediate economic assets.",
      "type": "response",
      "side": "pro",
      "depth": 2,
      "parent_id": "a4f6f316-1f1a-49fd-a979-51db2c3053e2",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:38.733374"
    },
    {
      "id": "67ca6270-9858-49ad-a281-4162783dd4ee",
      "text": "The $340 billion annual adaptation cost for developing nations is minimal compared to the $1.9 trillion annual global economic losses projected by 2050 if climate negligence continues.",
      "type": "response",
      "side": "pro",
      "depth": 2,
      "parent_id": "afc0f818-0764-482e-9b7c-6f68a5799e5f",
      "children_count": 2,
      "references": [
        "Oxfam, Swiss Re Institute"
      ],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:38.739804"
    },
    {
      "id": "a0a3f20d-346c-4a14-90a8-3cd8f63fefac",
      "text": "Small-scale adaptation like appliance rebates and localized drainage cannot protect against escalating extreme weather events; major, disruptive interventions (e.g., Netherlands' Delta Works, Venice's MOSE project) become necessary when climate impacts exceed the design limits of incremental improvements.",
      "type": "response",
      "side": "con",
      "depth": 3,
      "parent_id": "780f652c-69ff-418e-898b-c30f320190c9",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:46.892788"
    },
    {
      "id": "ba619dc6-68d3-4df6-ba4c-817be57f97aa",
      "text": "Implementing widespread climate-resilient construction standards imposes significant upfront costs on builders and homeowners, leading to fierce political resistance and delays, as seen in the decades-long struggle to update flood maps and building codes across highly affected U.S. states.",
      "type": "response",
      "side": "con",
      "depth": 3,
      "parent_id": "780f652c-69ff-418e-898b-c30f320190c9",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:46.892835"
    },
    {
      "id": "5052648a-4558-40cc-aeed-a82de31d1d01",
      "text": "The $340 billion cost addresses only developing world adaptation, not the full global investment required; the actual worldwide adaptation cost necessary to avert the projected $1.9 trillion loss makes adaptation far more expensive than suggested.",
      "type": "response",
      "side": "con",
      "depth": 3,
      "parent_id": "67ca6270-9858-49ad-a281-4162783dd4ee",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:50.530580"
    },
    {
      "id": "04bc4192-d339-4b99-abe1-55b82a6cd6b5",
      "text": "Adaptation costs cannot prevent the entirety of the $1.9 trillion projected economic loss because continued emissions ensure diminishing returns; coastal defenses and infrastructure investments will inevitably be physically overwhelmed by unmitigated sea-level rise and extreme weather escalation.",
      "type": "response",
      "side": "con",
      "depth": 3,
      "parent_id": "67ca6270-9858-49ad-a281-4162783dd4ee",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:50.530605"
    },
    {
      "id": "e3a1ab40-08af-47d6-b02e-096bfa36db73",
      "text": "Prioritizing adaptation fails when climate impacts exceed critical physical and ecological thresholds, which only sufficient prevention can avoid. For example, ecosystems like the Great Barrier Reef face unavoidable collapse above 1.5\u00b0C of warming regardless of adaptation, and low-lying island states cannot adapt to sea-level rise exceeding several meters.",
      "type": "con",
      "side": "con",
      "depth": 0,
      "parent_id": "meta-con",
      "children_count": 3,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:50.530710"
    },
    {
      "id": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "text": "Adaptation measures must be continually updated and expanded as warming progresses, creating an indefinite, accelerating financial burden. Prevention offers superior long-term cost-effectiveness by avoiding the most severe global economic damage costs associated with extreme climate impacts.",
      "type": "con",
      "side": "con",
      "depth": 0,
      "parent_id": "meta-con",
      "children_count": 4,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:50.531125"
    },
    {
      "id": "0506e9d3-ea50-4fc3-b8a5-703b507ac57f",
      "text": "An exclusive focus on adaptation risks global systemic instability by failing to mitigate the scale of drivers for mass displacement, resource conflicts, and state fragility. Only rapid prevention minimizes the unmanageable societal risks seen in vulnerable regions like the Sahel.",
      "type": "con",
      "side": "con",
      "depth": 0,
      "parent_id": "meta-con",
      "children_count": 2,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:50.531379"
    },
    {
      "id": "51ec1952-a485-4a47-9fa0-76abb9f98ca4",
      "text": "Prioritizing adaptation violates principles of climate justice by shifting the critical financial and engineering burden onto vulnerable developing nations that contributed least to historic emissions. These nations, such as those in Sub-Saharan Africa, lack the capacity to fully adapt on their own.",
      "type": "con",
      "side": "con",
      "depth": 0,
      "parent_id": "meta-con",
      "children_count": 1,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:23:50.531610"
    },
    {
      "id": "b6e4742d-28fe-4669-9578-d6385f79d7ba",
      "text": "Prioritizing adaptation is a strategic choice separate from the funding mechanism. Developed nations can fulfill \"common but differentiated responsibilities\" (CBDR) by prioritizing and significantly funding adaptation projects via mechanisms like the Green Climate Fund, thereby directing resources to vulnerable nations rather than shifting the burden to them.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "51ec1952-a485-4a47-9fa0-76abb9f98ca4",
      "children_count": 2,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:01.260639"
    },
    {
      "id": "27377890-8e28-4b45-96e3-6e53050d3bcc",
      "text": "Prevention's superior long-term cost-effectiveness is conditional on mobilizing an immediate, massive capital investment of $4-5 trillion annually for the global energy transition, a prohibitive financial burden that must be funded decades before any savings materialize.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "children_count": 1,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:01.834393"
    },
    {
      "id": "0fcb4af7-254c-4e05-8ede-c584445246c5",
      "text": "Adaptation is immediately necessary to protect human life and infrastructure from current climate risks, a function that long-term prevention policies cannot fulfill for decades due to inherent lag time in both atmospheric and political systems.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "e3a1ab40-08af-47d6-b02e-096bfa36db73",
      "children_count": 1,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:08.298270"
    },
    {
      "id": "52bf31fd-5ea6-419d-bc35-1a9f55736277",
      "text": "Limiting global warming, even partially (e.g., to 2.0\u00b0C), fundamentally alters the physical environment, preserving the core ecological and geographical conditions necessary for adaptation strategies to function effectively.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "e3a1ab40-08af-47d6-b02e-096bfa36db73",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:08.298742"
    },
    {
      "id": "fd17c1ad-91fd-44f9-b22a-42246e3a864b",
      "text": "Climate change impacts are already causing immediate instability and resource conflicts, such as accelerating sea-level rise displacing communities in Bangladesh and intensifying droughts in the Sahel. Therefore, adaptation measures are instantly critical to manage unavoidable, existing societal risks, regardless of the success of future prevention.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "0506e9d3-ea50-4fc3-b8a5-703b507ac57f",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:09.460138"
    },
    {
      "id": "890130e5-9859-4bc8-bcaf-49c7033e7dbd",
      "text": "Climate physics dictates that even aggressive prevention (mitigation) efforts will not stabilize global temperatures for several decades after implementation. Focusing on prevention alone cannot minimize immediate unmanageable societal risks, such as the current humanitarian crises driven by extreme weather in Central America, which require immediate adaptation strategies.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "0506e9d3-ea50-4fc3-b8a5-703b507ac57f",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:09.461204"
    },
    {
      "id": "d1269a61-a9cc-4516-8fb5-d1c06b70d7b9",
      "text": "Actual Green Climate Fund financing remains grossly insufficient and requires significant co-financing from vulnerable nations, effectively shifting a substantial financial burden to those least capable of paying.",
      "type": "response",
      "side": "con",
      "depth": 2,
      "parent_id": "b6e4742d-28fe-4669-9578-d6385f79d7ba",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:10.542591"
    },
    {
      "id": "d9a84c73-298b-4498-ba87-4cb02a045bab",
      "text": "Prioritizing adaptation in global negotiations often serves as a political justification for slowing mitigation efforts by developed nations, inevitably shifting the greater physical and economic burden of unadaptable climate impacts onto vulnerable countries.",
      "type": "response",
      "side": "con",
      "depth": 2,
      "parent_id": "b6e4742d-28fe-4669-9578-d6385f79d7ba",
      "children_count": 2,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:10.543338"
    },
    {
      "id": "4fbce0dd-075c-4931-9eed-a6bac868e3e6",
      "text": "Every dollar invested in climate prevention currently yields $4 to $7 in avoided future damages, proving that the Net Present Value of immediate transition funding vastly outweighs the upfront cost.",
      "type": "response",
      "side": "con",
      "depth": 2,
      "parent_id": "27377890-8e28-4b45-96e3-6e53050d3bcc",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:12.538061"
    },
    {
      "id": "37c0b4e1-a762-48ff-989e-6ba3f0803b61",
      "text": "Adaptation efforts frequently result in maladaptation, such as building coastal defenses that unintentionally destroy protective wetlands and increase flood risk elsewhere, demonstrating that necessary actions can fail to minimize transitional damages and instead create new risks.",
      "type": "response",
      "side": "con",
      "depth": 2,
      "parent_id": "0fcb4af7-254c-4e05-8ede-c584445246c5",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:17.412276"
    },
    {
      "id": "963a092a-931b-49ed-b05b-53dcfec7d118",
      "text": "Resilience planning, a core part of adaptation, requires detailed climate risk assessment and future-proofing, which inherently informs and justifies more ambitious long-term mitigation targets by quantifying avoided damages.",
      "type": "response",
      "side": "pro",
      "depth": 3,
      "parent_id": "d9a84c73-298b-4498-ba87-4cb02a045bab",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:24.273332"
    },
    {
      "id": "9b61d09c-c5ec-4fa2-980b-1ce1a142cf70",
      "text": "Slowing mitigation in developed nations is primarily driven by domestic political resistance to economic restructuring and powerful fossil fuel lobbying, not by the availability of adaptation as a political justification.",
      "type": "response",
      "side": "pro",
      "depth": 3,
      "parent_id": "d9a84c73-298b-4498-ba87-4cb02a045bab",
      "children_count": 0,
      "references": [],
      "source": "ai-generated",
      "created_at": "2025-10-11T00:24:24.273358"
    },
    {
      "id": "e1aca95c-eb3e-4cc6-91dc-89d2703f310b",
      "text": "Human activity, particularly the burning of fossil fuels since the industrial revolution, is the primary driver of climate change.",
      "type": "con",
      "side": "con",
      "depth": 0,
      "parent_id": "meta-con",
      "children_count": 0,
      "references": [],
      "source": "extracted:chunk_1",
      "created_at": "2025-10-11T14:37:53.603760+00:00"
    },
    {
      "id": "eabef3a4-6e76-4312-a89b-3e3d9c68442a",
      "text": "Climate models are uncertain and their predictions may be overstated due to the existence of natural climate variability throughout Earth's history.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "e3a1ab40-08af-47d6-b02e-096bfa36db73",
      "children_count": 0,
      "references": [],
      "source": "extracted:chunk_1",
      "created_at": "2025-10-11T14:37:53.603861+00:00"
    },
    {
      "id": "a71462c3-7d39-4ea5-9bd2-2aad52e7f8d1",
      "text": "The increasing cost-competitiveness of solar and wind power compared to fossil fuels demonstrates that renewable energy technologies offer a viable path for climate change prevention.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "children_count": 0,
      "references": [],
      "source": "extracted:chunk_1",
      "created_at": "2025-10-11T14:37:53.603916+00:00"
    },
    {
      "id": "3a40ce7e-a825-4c49-8019-a04ff3a327be",
      "text": "Although the economic costs of comprehensive climate action are substantial, the fiscal consequences of inaction are likely far greater.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "children_count": 0,
      "references": [],
      "source": "extracted:chunk_1",
      "created_at": "2025-10-11T14:37:53.603963+00:00"
    },
    {
      "id": "8130e6aa-bb86-484b-9f5f-55a33a8f61da",
      "text": "Coastal cities face immediate and unavoidable flooding risks due to sea level rise, necessitating crucial adaptation efforts.",
      "type": "objection",
      "side": "con",
      "depth": 1,
      "parent_id": "9bf3d0ae-e7ef-4ed3-b57f-e1142c9519d6",
      "children_count": 0,
      "references": [],
      "source": "extracted:chunk_1",
      "created_at": "2025-10-11T14:37:53.604008+00:00"
    },
    {
      "id": "af881956-0f34-463a-a138-cb79f5adbc44",
      "text": "Uncertainty in climate models and overly exaggerated predictions, coupled with the long history of natural climate variability, suggest that expensive prevention measures may be misdirected or unnecessary.",
      "type": "pro",
      "side": "pro",
      "depth": 0,
      "parent_id": "meta-pro",
      "children_count": 0,
      "references": [],
      "source": "extracted:chunk_1",
      "created_at": "2025-10-11T14:42:34.715780+00:00"
    },
    {
      "id": "5e63e148-9028-421c-b5e0-d7b71f60ea23",
      "text": "Climate prevention efforts are increasingly viable because renewable technologies like solar and wind power are becoming cost-competitive with high-polluting fossil fuels.",
      "type": "objection",
      "side": "pro",
      "depth": 1,
      "parent_id": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "children_count": 0,
      "references": [],
      "source": "extracted:chunk_1",
      "created_at": "2025-10-11T14:42:34.715892+00:00"
    },
    {
      "id": "meta-pro",
      "text": "Arguments For",
      "type": "meta-pro",
      "side": "pro",
      "depth": -1,
      "parent_id": null,
      "children_count": 5,
      "references": [],
      "source": "system",
      "created_at": "2025-10-11T00:23:15.097335"
    },
    {
      "id": "meta-con",
      "text": "Arguments Against",
      "type": "meta-con",
      "side": "con",
      "depth": -1,
      "parent_id": null,
      "children_count": 5,
      "references": [],
      "source": "system",
      "created_at": "2025-10-11T00:23:15.097335"
    }
  ],
  "links": [
    {
      "source": "9bf3d0ae-e7ef-4ed3-b57f-e1142c9519d6",
      "target": "a5f39e8e-a0c7-49c9-b542-673908cf6d76",
      "type": "objection"
    },
    {
      "source": "372ac475-be51-4a7e-87f0-260058e5eeed",
      "target": "a4f6f316-1f1a-49fd-a979-51db2c3053e2",
      "type": "objection"
    },
    {
      "source": "372ac475-be51-4a7e-87f0-260058e5eeed",
      "target": "88ada93f-5b44-4400-b9e2-3996199525ea",
      "type": "objection"
    },
    {
      "source": "4f09eaee-3435-4d9f-9abf-5fae495951c8",
      "target": "07b5f2d6-c1d9-4f15-a1d3-4720fe1c44b3",
      "type": "objection"
    },
    {
      "source": "4f09eaee-3435-4d9f-9abf-5fae495951c8",
      "target": "97d81df7-c782-4a97-a275-a30785e9ac14",
      "type": "objection"
    },
    {
      "source": "9a93740a-97f0-4c7a-ab6f-3fb948fd593b",
      "target": "afc0f818-0764-482e-9b7c-6f68a5799e5f",
      "type": "objection"
    },
    {
      "source": "9a93740a-97f0-4c7a-ab6f-3fb948fd593b",
      "target": "4d41ab29-df7d-4f72-b950-e42cec16a9b4",
      "type": "objection"
    },
    {
      "source": "07b5f2d6-c1d9-4f15-a1d3-4720fe1c44b3",
      "target": "780f652c-69ff-418e-898b-c30f320190c9",
      "type": "response"
    },
    {
      "source": "88ada93f-5b44-4400-b9e2-3996199525ea",
      "target": "108f3cbc-6336-4e71-bda3-51b40f8ae328",
      "type": "response"
    },
    {
      "source": "a4f6f316-1f1a-49fd-a979-51db2c3053e2",
      "target": "0c88636e-45a0-42ba-a9df-b2bad79d9fff",
      "type": "response"
    },
    {
      "source": "a4f6f316-1f1a-49fd-a979-51db2c3053e2",
      "target": "aa400806-73d3-485d-96fb-61a63382e8c6",
      "type": "response"
    },
    {
      "source": "afc0f818-0764-482e-9b7c-6f68a5799e5f",
      "target": "67ca6270-9858-49ad-a281-4162783dd4ee",
      "type": "response"
    },
    {
      "source": "780f652c-69ff-418e-898b-c30f320190c9",
      "target": "a0a3f20d-346c-4a14-90a8-3cd8f63fefac",
      "type": "response"
    },
    {
      "source": "780f652c-69ff-418e-898b-c30f320190c9",
      "target": "ba619dc6-68d3-4df6-ba4c-817be57f97aa",
      "type": "response"
    },
    {
      "source": "67ca6270-9858-49ad-a281-4162783dd4ee",
      "target": "5052648a-4558-40cc-aeed-a82de31d1d01",
      "type": "response"
    },
    {
      "source": "67ca6270-9858-49ad-a281-4162783dd4ee",
      "target": "04bc4192-d339-4b99-abe1-55b82a6cd6b5",
      "type": "response"
    },
    {
      "source": "51ec1952-a485-4a47-9fa0-76abb9f98ca4",
      "target": "b6e4742d-28fe-4669-9578-d6385f79d7ba",
      "type": "objection"
    },
    {
      "source": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "target": "27377890-8e28-4b45-96e3-6e53050d3bcc",
      "type": "objection"
    },
    {
      "source": "e3a1ab40-08af-47d6-b02e-096bfa36db73",
      "target": "0fcb4af7-254c-4e05-8ede-c584445246c5",
      "type": "objection"
    },
    {
      "source": "e3a1ab40-08af-47d6-b02e-096bfa36db73",
      "target": "52bf31fd-5ea6-419d-bc35-1a9f55736277",
      "type": "objection"
    },
    {
      "source": "0506e9d3-ea50-4fc3-b8a5-703b507ac57f",
      "target": "fd17c1ad-91fd-44f9-b22a-42246e3a864b",
      "type": "objection"
    },
    {
      "source": "0506e9d3-ea50-4fc3-b8a5-703b507ac57f",
      "target": "890130e5-9859-4bc8-bcaf-49c7033e7dbd",
      "type": "objection"
    },
    {
      "source": "b6e4742d-28fe-4669-9578-d6385f79d7ba",
      "target": "d1269a61-a9cc-4516-8fb5-d1c06b70d7b9",
      "type": "response"
    },
    {
      "source": "b6e4742d-28fe-4669-9578-d6385f79d7ba",
      "target": "d9a84c73-298b-4498-ba87-4cb02a045bab",
      "type": "response"
    },
    {
      "source": "27377890-8e28-4b45-96e3-6e53050d3bcc",
      "target": "4fbce0dd-075c-4931-9eed-a6bac868e3e6",
      "type": "response"
    },
    {
      "source": "0fcb4af7-254c-4e05-8ede-c584445246c5",
      "target": "37c0b4e1-a762-48ff-989e-6ba3f0803b61",
      "type": "response"
    },
    {
      "source": "d9a84c73-298b-4498-ba87-4cb02a045bab",
      "target": "963a092a-931b-49ed-b05b-53dcfec7d118",
      "type": "response"
    },
    {
      "source": "d9a84c73-298b-4498-ba87-4cb02a045bab",
      "target": "9b61d09c-c5ec-4fa2-980b-1ce1a142cf70",
      "type": "response"
    },
    {
      "source": "e3a1ab40-08af-47d6-b02e-096bfa36db73",
      "target": "eabef3a4-6e76-4312-a89b-3e3d9c68442a",
      "type": "objection"
    },
    {
      "source": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "target": "a71462c3-7d39-4ea5-9bd2-2aad52e7f8d1",
      "type": "objection"
    },
    {
      "source": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "target": "3a40ce7e-a825-4c49-8019-a04ff3a327be",
      "type": "objection"
    },
    {
      "source": "9bf3d0ae-e7ef-4ed3-b57f-e1142c9519d6",
      "target": "8130e6aa-bb86-484b-9f5f-55a33a8f61da",
      "type": "objection"
    },
    {
      "source": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "target": "5e63e148-9028-421c-b5e0-d7b71f60ea23",
      "type": "objection"
    },
    {
      "source": "meta-pro",
      "target": "9bf3d0ae-e7ef-4ed3-b57f-e1142c9519d6",
      "type": "meta-link"
    },
    {
      "source": "meta-pro",
      "target": "372ac475-be51-4a7e-87f0-260058e5eeed",
      "type": "meta-link"
    },
    {
      "source": "meta-pro",
      "target": "9a93740a-97f0-4c7a-ab6f-3fb948fd593b",
      "type": "meta-link"
    },
    {
      "source": "meta-pro",
      "target": "4f09eaee-3435-4d9f-9abf-5fae495951c8",
      "type": "meta-link"
    },
    {
      "source": "meta-pro",
      "target": "af881956-0f34-463a-a138-cb79f5adbc44",
      "type": "meta-link"
    },
    {
      "source": "meta-con",
      "target": "e3a1ab40-08af-47d6-b02e-096bfa36db73",
      "type": "meta-link"
    },
    {
      "source": "meta-con",
      "target": "e866c5d1-75fb-41f9-8b4e-162da76c0fa8",
      "type": "meta-link"
    },
    {
      "source": "meta-con",
      "target": "0506e9d3-ea50-4fc3-b8a5-703b507ac57f",
      "type": "meta-link"
    },
    {
      "source": "meta-con",
      "target": "51ec1952-a485-4a47-9fa0-76abb9f98ca4",
      "type": "meta-link"
    },
    {
      "source": "meta-con",
      "target": "e1aca95c-eb3e-4cc6-91dc-89d2703f310b",
      "type": "meta-link"
    }
  ]
};

        // Dimensions
        const width = window.innerWidth;
        const height = window.innerHeight - 70;

        // ========== TEXT PROCESSING UTILITIES ==========

        /**
         * Extract first complete sentence(s) up to a character limit
         */
        function extractFirstSentences(text, maxChars) {
            // Match sentences (ending with . ! ? or .)
            const sentences = text.match(/[^.!?]+[.!?]+/g) || [];

            if (sentences.length === 0) {
                return truncateAtWord(text, maxChars);
            }

            let result = '';
            for (const sentence of sentences) {
                if ((result + sentence).length <= maxChars) {
                    result += sentence;
                } else {
                    break;
                }
            }

            // If we got at least one sentence, return it
            if (result.length > 0) {
                return result.trim();
            }

            // Otherwise, truncate the first sentence at word boundary
            return truncateAtWord(sentences[0], maxChars);
        }

        /**
         * Truncate text at word boundary
         */
        function truncateAtWord(text, maxChars) {
            if (text.length <= maxChars) {
                return text;
            }

            // Find last space before maxChars
            let truncated = text.substring(0, maxChars);
            const lastSpace = truncated.lastIndexOf(' ');

            if (lastSpace > maxChars * 0.6) {
                truncated = truncated.substring(0, lastSpace);
            }

            return truncated.trim() + '...';
        }

        /**
         * Get display text for node based on depth
         */
        function getNodeDisplayText(d) {
            // Meta nodes show full text
            if (d.type === 'meta-pro' || d.type === 'meta-con') {
                return d.text;
            }

            // Character limits based on depth
            const limits = {
                0: 120,  // Root nodes - show more
                1: 90,
                2: 70,
                3: 50,
                4: 35,
                5: 30
            };

            const maxChars = limits[Math.min(d.depth, 5)];
            return extractFirstSentences(d.text, maxChars);
        }

        /**
         * Get tooltip text (2-3 sentences)
         */
        function getTooltipText(d) {
            const preview = extractFirstSentences(d.text, 300);
            return `[${d.type.toUpperCase()}] ${preview}`;
        }

        /**
         * Calculate node radius based on importance and text length
         */
        function getNodeRadius(d) {
            // Meta nodes are MUCH larger to be prominent cluster centers
            if (d.type === 'meta-pro' || d.type === 'meta-con') {
                return 120;
            }

            // Base radius by depth
            const baseRadius = {
                0: 45,  // Root nodes largest
                1: 35,
                2: 30,
                3: 25,
                4: 22,
                5: 20
            };

            const base = baseRadius[Math.min(d.depth, 5)] || 20;

            // Adjust slightly based on text length
            const textFactor = Math.sqrt(d.text.length) * 0.3;

            return base + textFactor;
        }

        /**
         * Get foreignObject dimensions for text wrapping
         */
        function getForeignObjectSize(d) {
            // Meta nodes get much larger text areas
            if (d.type === 'meta-pro' || d.type === 'meta-con') {
                return {
                    width: 320,
                    height: 120
                };
            }

            const widths = {
                0: 200,
                1: 170,
                2: 150,
                3: 120,
                4: 100,
                5: 85
            };

            const heights = {
                0: 70,
                1: 60,
                2: 55,
                3: 50,
                4: 45,
                5: 40
            };

            return {
                width: widths[Math.min(d.depth, 5)] || 85,
                height: heights[Math.min(d.depth, 5)] || 40
            };
        }

        // Create SVG
        const svg = d3.select("#graph")
            .attr("width", width)
            .attr("height", height);

        // Create zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 4])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
            });

        svg.call(zoom);

        // Main group for zoom/pan
        const g = svg.append("g");

        // Define unified arrow markers with clean neutral styling
        const defs = svg.append("defs");

        // Unified neutral arrow for all link types
        const arrowTypes = ['pro', 'con', 'objection', 'response', 'default', 'meta-link'];

        arrowTypes.forEach(type => {
            defs.append("marker")
                .attr("id", `arrow-${type}`)
                .attr("viewBox", "0 -5 10 10")
                .attr("refX", 10) // Position arrow tip at the edge
                .attr("refY", 0)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M0,-3L10,0L0,3")
                .attr("fill", "#6c757d")
                .attr("opacity", 0.5);
        });

        // Create force simulation with improved parameters to prevent overlap
        const simulation = d3.forceSimulation(graphData.nodes)
            .force("link", d3.forceLink(graphData.links).id(d => d.id).distance(d => {
                // Much longer links for better spacing
                const target = d.target;
                const depth = typeof target === 'object' ? target.depth : 0;
                const sourceRadius = getNodeRadius(d.source);
                const targetRadius = getNodeRadius(target);
                // Significantly increased spacing between nodes
                return Math.max(250, sourceRadius + targetRadius + 150 + (depth * 40));
            }).strength(0.4)) // Reduced from 0.6 to make links more flexible
            .force("charge", d3.forceManyBody()
                .strength(d => {
                    // Strong repulsion to prevent overlap
                    const radius = getNodeRadius(d);
                    return -1500 - (radius * 20); // Increased repulsion
                })
                .distanceMax(1000)) // Increased distance
            .force("center", d3.forceCenter(width / 2, height / 2).strength(0.01))
            .force("x", d3.forceX(width / 2).strength(0.005))
            // Gentler Y-force for softer layering
            .force("y", d3.forceY(d => {
                // Position nodes in horizontal layers based on depth with larger spacing
                const layerHeight = 280;
                const startY = height / 2 - 200;
                return startY + (d.depth + 1) * layerHeight;
            }).strength(0.25)) // Reduced from 0.6 for more flexibility
            .force("collision", d3.forceCollide()
                .radius(d => getNodeRadius(d) + 60) // Increased from 40
                .strength(1.0)
                .iterations(4))
            .alphaDecay(0.015)
            .velocityDecay(0.4);

        // Find meta nodes
        const metaProNode = graphData.nodes.find(n => n.type === 'meta-pro');
        const metaConNode = graphData.nodes.find(n => n.type === 'meta-con');

        // Add custom force to separate meta nodes horizontally and cluster children around them
        if (metaProNode && metaConNode) {
            simulation.force("cluster", function(alpha) {
                const separation = 1400; // Distance between meta nodes

                graphData.nodes.forEach(d => {
                    if (d.type === 'meta-pro') {
                        // Push meta-pro to the left
                        d.vx -= (d.x - (width / 2 - separation / 2)) * 0.15 * alpha;
                    } else if (d.type === 'meta-con') {
                        // Push meta-con to the right
                        d.vx += ((width / 2 + separation / 2) - d.x) * 0.15 * alpha;
                    } else {
                        // Gentle horizontal clustering only (no vertical pull)
                        let targetX;

                        if (d.side === 'pro') {
                            // Pro nodes gently attracted to left cluster
                            targetX = metaProNode.x || (width / 2 - separation / 2);
                        } else {
                            // Con nodes gently attracted to right cluster
                            targetX = metaConNode.x || (width / 2 + separation / 2);
                        }

                        // Very gentle horizontal pull only (removed vertical)
                        const dx = targetX - d.x;
                        d.vx += dx * 0.01 * alpha; // Reduced from 0.04
                    }
                });
            });
        }

        // Create links with arrows using curved paths
        const link = g.append("g")
            .selectAll("path")
            .data(graphData.links)
            .enter().append("path")
            .attr("class", d => `link ${d.type}`)
            .attr("stroke-width", d => {
                const target = d.target;
                const depth = typeof target === 'object' ? target.depth : 0;
                return Math.max(1, 4 - depth);
            })
            .attr("marker-end", d => `url(#arrow-${d.type})`)
            .attr("fill", "none");

        // Create nodes
        const node = g.append("g")
            .selectAll("g")
            .data(graphData.nodes)
            .enter().append("g")
            .attr("class", d => `node ${d.type} ${d.side} depth-${d.depth}`)
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        // Add circles to nodes (invisible, only for physics)
        node.append("circle")
            .attr("r", d => getNodeRadius(d));

        // Add multi-line labels using foreignObject for better text wrapping
        node.each(function(d) {
            const nodeGroup = d3.select(this);
            const size = getForeignObjectSize(d);
            const displayText = getNodeDisplayText(d);

            // Create foreignObject for HTML text wrapping
            const fo = nodeGroup.append("foreignObject")
                .attr("x", -size.width / 2)
                .attr("y", -size.height / 2)
                .attr("width", size.width)
                .attr("height", size.height)
                .on("click", function(event) {
                    event.stopPropagation();
                    showNodeDetails(d);
                })
                .on("dblclick", function(event) {
                    event.stopPropagation();
                    toggleSubtree(d);
                });

            // Create HTML content with just text (no badges for cleaner look)
            const div = fo.append("xhtml:div")
                .attr("class", "node-label")
                .style("width", "100%")
                .style("height", "100%")
                .style("display", "flex")
                .style("flex-direction", "column")
                .style("align-items", "center")
                .style("justify-content", "center")
                .attr("title", getTooltipText(d));

            // Add text content only (badges removed for cleaner appearance)
            div.append("xhtml:div")
                .attr("class", "node-text-content")
                .style("font-size", d.type === 'meta-pro' || d.type === 'meta-con' ? "17px" : (d.depth === 0 ? "14px" : (d.depth <= 2 ? "12px" : "11px")))
                .style("font-weight", d.type === 'meta-pro' || d.type === 'meta-con' ? "700" : (d.depth === 0 ? "600" : "500"))
                .text(displayText);
        });

        // Helper function to get text box edge point with small gap for arrow
        function getBoxEdgePoint(node, fromX, fromY) {
            const size = getForeignObjectSize(node);
            const halfW = size.width / 2;
            const halfH = size.height / 2;

            // Calculate angle from source to target
            const dx = node.x - fromX;
            const dy = node.y - fromY;
            const angle = Math.atan2(dy, dx);

            // Calculate intersection with rectangle
            const cos = Math.cos(angle);
            const sin = Math.sin(angle);

            // Small gap for arrow (in pixels)
            const gap = 8;

            // Check which edge we hit first
            let x, y;
            if (Math.abs(cos) > Math.abs(sin) * (halfW / halfH)) {
                // Hit left or right edge
                x = node.x - Math.sign(cos) * (halfW + gap);
                y = node.y - Math.tan(angle) * Math.sign(cos) * (halfW + gap);
            } else {
                // Hit top or bottom edge
                y = node.y - Math.sign(sin) * (halfH + gap);
                x = node.x - (y - node.y) / Math.tan(angle);
            }

            return { x, y };
        }

        // Update positions on simulation tick
        simulation.on("tick", () => {
            link.each(function(d) {
                const source = d.source;
                const target = d.target;

                // Get edge points of text boxes
                const sourcePoint = getBoxEdgePoint(source, target.x, target.y);
                const targetPoint = getBoxEdgePoint(target, source.x, source.y);

                // Create straight path
                const pathData = `M ${sourcePoint.x},${sourcePoint.y} L ${targetPoint.x},${targetPoint.y}`;

                d3.select(this).attr("d", pathData);
            });

            node.attr("transform", d => `translate(${d.x},${d.y})`);
        });

        // Drag functions
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // Search functionality
        document.getElementById("search").addEventListener("input", (e) => {
            const query = e.target.value.toLowerCase();

            node.classed("highlighted", false);

            if (query) {
                node.classed("highlighted", d =>
                    d.text.toLowerCase().includes(query)
                );
            }
        });

        // ========== SIDEBAR UTILITIES ==========

        /**
         * Get path from root to node (for breadcrumb)
         */
        function getNodePath(nodeId) {
            const path = [];
            let current = graphData.nodes.find(n => n.id === nodeId);

            while (current) {
                path.unshift(current);
                if (current.parent_id) {
                    current = graphData.nodes.find(n => n.id === current.parent_id);
                } else {
                    break;
                }
            }

            return path;
        }

        /**
         * Get all children of a node
         */
        function getChildren(nodeId) {
            return graphData.nodes.filter(n => n.parent_id === nodeId);
        }

        /**
         * Count all descendants recursively
         */
        function countDescendants(nodeId) {
            const children = getChildren(nodeId);
            let count = children.length;

            children.forEach(child => {
                count += countDescendants(child.id);
            });

            return count;
        }

        /**
         * Focus camera on a specific node
         */
        function focusOnNode(nodeId) {
            const nodeData = graphData.nodes.find(n => n.id === nodeId);
            if (!nodeData) return;

            const scale = 1.5;
            const translateX = width / 2 - scale * nodeData.x;
            const translateY = height / 2 - scale * nodeData.y;

            svg.transition().duration(750).call(
                zoom.transform,
                d3.zoomIdentity.translate(translateX, translateY).scale(scale)
            );
        }

        /**
         * Copy text to clipboard
         */
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Show brief confirmation
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úì Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        // Show node details in sidebar
        function showNodeDetails(d) {
            node.classed("selected", false);
            d3.select(event.target.parentNode).classed("selected", true);

            const sidebar = document.getElementById("sidebar");
            const sidebarHeader = document.getElementById("sidebar-header");
            const sidebarBody = document.getElementById("sidebar-body");

            // Build breadcrumb
            const path = getNodePath(d.id);
            let breadcrumbHtml = '<div class="breadcrumb">';
            path.forEach((node, index) => {
                if (index > 0) {
                    breadcrumbHtml += '<span class="breadcrumb-separator">‚Ä∫</span>';
                }
                const truncated = truncateAtWord(node.text, 30);
                breadcrumbHtml += `<span class="breadcrumb-item" onclick="showNodeDetails(graphData.nodes.find(n => n.id === '${node.id}'))">${truncated}</span>`;
            });
            breadcrumbHtml += '</div>';

            // Header with breadcrumb
            sidebarHeader.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                    <span class="node-badge-large ${d.type}">${d.type}</span>
                    <span class="node-badge-large ${d.side}">${d.side}</span>
                </div>
                <h2>Argument Details</h2>
                ${breadcrumbHtml}
            `;

            // Get children and descendants
            const children = getChildren(d.id);
            const descendantCount = countDescendants(d.id);

            // Build body content
            let bodyHtml = `
                <!-- Main Argument Section -->
                <div class="section">
                    <div class="section-title">üìù Argument</div>
                    <div class="node-text">${d.text}</div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="action-btn primary" onclick="focusOnNode('${d.id}')">
                        üéØ Focus
                    </button>
                    <button class="action-btn" onclick="copyToClipboard(\`${d.text.replace(/`/g, '\\`')}\`)">
                        üìã Copy
                    </button>
                </div>

                <!-- Statistics -->
                <div class="stats-row">
                    <div class="stat-box">
                        <div class="stat-box-value">${d.depth}</div>
                        <div class="stat-box-label">Depth</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-value">${children.length}</div>
                        <div class="stat-box-label">Children</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-box-value">${descendantCount}</div>
                        <div class="stat-box-label">Descendants</div>
                    </div>
                </div>

                <!-- Metadata Grid -->
                <div class="section">
                    <div class="section-title">‚ÑπÔ∏è Metadata</div>
                    <div class="meta-grid">
                        <div class="meta-item">
                            <div class="meta-label">Source</div>
                            <div class="meta-value">${d.source}</div>
                        </div>
                        <div class="meta-item">
                            <div class="meta-label">Created</div>
                            <div class="meta-value">${new Date(d.created_at).toLocaleDateString()}</div>
                        </div>
                    </div>
                </div>
            `;

            // Add children section
            if (children.length > 0) {
                // Determine label based on node type
                let childrenLabel;
                if (d.type === 'meta-pro') {
                    childrenLabel = `${children.length} Supporting ${children.length === 1 ? 'Argument' : 'Arguments'}`;
                } else if (d.type === 'meta-con') {
                    childrenLabel = `${children.length} Opposing ${children.length === 1 ? 'Argument' : 'Arguments'}`;
                } else {
                    childrenLabel = `${children.length} ${children.length === 1 ? 'Response' : 'Responses'}`;
                }

                bodyHtml += `
                    <div class="section">
                        <div class="section-title">üå≥ ${childrenLabel}</div>
                `;

                children.forEach(child => {
                    const preview = truncateAtWord(child.text, 150);
                    bodyHtml += `
                        <div class="child-node ${child.type}" onclick="showNodeDetails(graphData.nodes.find(n => n.id === '${child.id}'))">
                            <div class="child-node-header">
                                <span class="child-node-badge ${child.type}" style="
                                    background: ${child.type === 'pro' ? '#d5f0e8' : child.type === 'con' ? '#f7e0e0' : child.type === 'objection' ? '#ffecd9' : '#e3eef8'};
                                    color: ${child.type === 'pro' ? '#2d9e7e' : child.type === 'con' ? '#c74848' : child.type === 'objection' ? '#d97a30' : '#4a7fb8'};
                                ">${child.type}</span>
                                <span style="font-size: 0.75em; color: #72777d;">${child.children_count} ${child.children_count === 1 ? 'reply' : 'replies'}</span>
                            </div>
                            <div class="child-node-text">${preview}</div>
                        </div>
                    `;
                });

                bodyHtml += '</div>';
            } else {
                bodyHtml += `
                    <div class="section">
                        <div class="empty-state">
                            <div style="font-size: 2em; margin-bottom: 10px;">üí≠</div>
                            <div>No responses yet</div>
                            <div style="font-size: 0.85em; margin-top: 5px;">This is a leaf node in the argument tree</div>
                        </div>
                    </div>
                `;
            }

            // Add references section
            if (d.references && d.references.length > 0) {
                bodyHtml += `
                    <div class="section">
                        <div class="section-title">üîó References</div>
                        <ul class="references-list">
                `;

                d.references.forEach(ref => {
                    bodyHtml += `<li><a href="${ref}" target="_blank">${ref}</a></li>`;
                });

                bodyHtml += `
                        </ul>
                    </div>
                `;
            }

            sidebarBody.innerHTML = bodyHtml;
            sidebar.classList.add("open");
        }

        function closeSidebar() {
            document.getElementById("sidebar").classList.remove("open");
            node.classed("selected", false);
        }

        // Click outside to close sidebar
        svg.on("click", () => {
            closeSidebar();
        });

        // Button handlers - Reset and fit view
        function resetAndFit() {
            // Clear search and highlights
            document.getElementById("search").value = "";
            node.classed("highlighted", false);
            closeSidebar();

            // Fit graph to view with animation
            const bounds = g.node().getBBox();
            const fullWidth = width;
            const fullHeight = height;
            const widthScale = fullWidth / bounds.width;
            const heightScale = fullHeight / bounds.height;
            const scale = Math.min(widthScale, heightScale) * 0.85;
            const translateX = fullWidth / 2 - scale * (bounds.x + bounds.width / 2);
            const translateY = fullHeight / 2 - scale * (bounds.y + bounds.height / 2);

            svg.transition().duration(750).call(
                zoom.transform,
                d3.zoomIdentity.translate(translateX, translateY).scale(scale)
            );
        }

        function toggleSubtree(d) {
            // TODO: Implement toggle subtree
            console.log("Toggle subtree not yet implemented for", d.id);
        }

        // Handle window resize
        window.addEventListener("resize", () => {
            const newWidth = window.innerWidth;
            const newHeight = window.innerHeight - 70;
            svg.attr("width", newWidth).attr("height", newHeight);
            simulation.force("center", d3.forceCenter(newWidth / 2, newHeight / 2));
            simulation.alpha(0.3).restart();
        });
    </script>
</body>
</html>